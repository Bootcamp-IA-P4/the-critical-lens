# The Critical Lens

![Django](https://img.shields.io/badge/Django-5.1.7-green.svg)
![Tailwind](https://img.shields.io/badge/Tailwind-3.4-blue.svg)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-latest-blue.svg)
![Docker](https://img.shields.io/badge/Docker-ready-blue.svg)

![Vista de la p√°gina principal](static/img/Macbook-Pro-16-2110x1286_critical_lens.png)

## ‚ö†Ô∏è Aviso Legal

**Este proyecto es exclusivamente para fines educativos y de investigaci√≥n.** La extracci√≥n de datos (scraping) implementada en este proyecto tiene como √∫nico objetivo el estudio acad√©mico y la pr√°ctica del desarrollo de software, sin fines comerciales. 

No se pretende violar los t√©rminos de servicio de ning√∫n sitio web. Los datos extra√≠dos no se redistribuyen ni se utilizan con fines comerciales. El desarrollador no se hace responsable del mal uso que se pueda hacer de estas herramientas.

Cualquier entidad que considere que sus derechos est√°n siendo vulnerados puede contactar con el desarrollador para solicitar la eliminaci√≥n del contenido correspondiente.

## üìù Descripci√≥n

**The Critical Lens** es una aplicaci√≥n web desarrollada con Django y Tailwind CSS que ayuda a los usuarios a combatir la desinformaci√≥n mediante herramientas basadas en el pensamiento cr√≠tico. En la era digital, donde la informaci√≥n fluye sin control, discernir la verdad se ha vuelto m√°s dif√≠cil que nunca. Este proyecto ofrece:

- **Analizador de Credibilidad**: Eval√∫a autom√°ticamente la credibilidad de noticias y contenidos usando par√°metros de verificaci√≥n de hechos y principios del pensamiento cr√≠tico.
- **Estad√≠sticas de Desinformaci√≥n**: An√°lisis de datos sobre casos verificados de desinformaci√≥n para comprender mejor el panorama actual y desarrollar herramientas de evaluaci√≥n cr√≠tica efectivas.
- **Base de Datos de Verificaci√≥n**: Sistema de scraping que extrae y almacena verificaciones de hechos del portal Newtral para su an√°lisis.

Esta aplicaci√≥n se basa en los conceptos y herramientas del pensamiento cr√≠tico desarrollados por la Fundaci√≥n para el Pensamiento Cr√≠tico (Dr. Richard Paul y Dra. Linda Elder), cuya gu√≠a se encuentra en el directorio `/docs` del proyecto. Los criterios de an√°lisis implementados en el servicio `ContentAnalysisService` se han desarrollado siguiendo los est√°ndares intelectuales universales y elementos del pensamiento descritos en esta gu√≠a.

## üöÄ Tecnolog√≠as

- **Backend**: Django 5.1.7
- **Frontend**: Tailwind CSS 3.4
- **Base de datos**: PostgreSQL
- **Web Scraping**: Selenium, BeautifulSoup4
- **Testing**: Pytest
- **Infraestructura**: Docker & Docker Compose

## üîß Instalaci√≥n

El proyecto puede instalarse mediante Docker (recomendado) o de forma manual.

### Opci√≥n 1: Instalaci√≥n con Docker (recomendada)

Esta opci√≥n proporciona un entorno completo y aislado con todas las dependencias necesarias, incluyendo PostgreSQL, Tailwind CSS y ChromeDriver para los tests.

#### Requisitos previos
- Docker y Docker Compose instalados en tu sistema

#### Pasos para instalaci√≥n con Docker

1. Clonar el repositorio
   ```bash
   git clone https://github.com/tuusuario/the-critical-lens.git
   cd the-critical-lens
   ```

2. Crear archivo de configuraci√≥n
   ```bash
   cp .env.example .env
   ```
   
   El archivo `.env` debe contener las siguientes variables para funcionar con Docker:
   ```
   # Django settings
   SECRET_KEY=django-insecure-your-secure-key-here
   DEBUG=True
   ALLOWED_HOSTS=127.0.0.1,localhost
   
   # Database settings
   DB_NAME=critical_lens
   DB_USER=postgres
   DB_PASSWORD=postgres
   DB_HOST=db    # Importante: usar 'db' para conectar con la base de datos en Docker
   DB_PORT=5432
   ```

3. Iniciar los contenedores
   ```bash
   # Iniciar la base de datos
   docker-compose up -d db
   
   # Iniciar el entorno de desarrollo de Django y Tailwind
   docker-compose up -d dev
   ```

4. Acceder a la aplicaci√≥n
   La aplicaci√≥n estar√° disponible en http://localhost:8000/

#### Comandos √∫tiles para Docker

```bash
# Ver logs de la aplicaci√≥n
docker-compose logs -f dev

# Extraer art√≠culos de Newtral (limit=5)
docker-compose exec dev python manage.py scrape_newtral --limit 5

# Crear superusuario para el panel de administraci√≥n
docker-compose exec dev python manage.py createsuperuser
```

#### Alternancia entre bases de datos

El proyecto permite alternar f√°cilmente entre usar la base de datos en Docker o una base de datos local/externa:

1. Para usar la base de datos en Docker:
   ```
   # Abre el archivo .env y aseg√∫rate de que contenga esta l√≠nea:
   DB_HOST=db
   ```

2. Para usar una base de datos local/externa:
   ```
   # Abre el archivo .env y cambia la configuraci√≥n a:
   DB_HOST=localhost    # O la direcci√≥n IP/hostname de tu base de datos externa
   ```

3. Despu√©s de cambiar el archivo .env, reinicia los contenedores:
   ```bash
   docker-compose restart dev
   ```

Esta configuraci√≥n te permite desarrollar con flexibilidad, usando la base de datos en Docker cuando quieres un entorno completamente autocontenido, o conect√°ndote a una base de datos externa cuando sea necesario.

### Opci√≥n 2: Instalaci√≥n manual

Si prefieres una instalaci√≥n sin Docker, sigue estos pasos:

1. Aseg√∫rate de tener los requisitos previos:
   - Python 3.8+
   - PostgreSQL
   - Node.js y NPM (para Tailwind CSS)
   - Chrome WebDriver (para el scraping con Selenium)

2. Clonar el repositorio
   ```bash
   git clone https://github.com/tuusuario/the-critical-lens.git
   cd the-critical-lens
   ```

3. Crear y activar entorno virtual
   ```bash
   python -m venv venv
   # En Windows
   venv\Scripts\activate
   # En macOS/Linux
   source venv/bin/activate
   ```

4. Instalar dependencias
   ```bash
   pip install -r requirements.txt
   ```

5. Configurar variables de entorno
   ```bash
   cp .env.example .env
   ```
   
   El archivo `.env` debe contener:
   ```
   # Django settings
   SECRET_KEY=django-insecure-your-secure-key-here
   DEBUG=True
   ALLOWED_HOSTS=127.0.0.1,localhost
   
   # Database settings
   DB_NAME=critical_lens
   DB_USER=postgres
   DB_PASSWORD=postgres
   DB_HOST=localhost    # Importante: usar 'localhost' para instalaci√≥n manual
   DB_PORT=5432
   ```

6. Configurar base de datos PostgreSQL
   ```bash
   # Crear base de datos en PostgreSQL
   createdb critical_lens
   ```

7. Aplicar migraciones
   ```bash
   python manage.py migrate
   ```

8. Configurar Tailwind CSS
   ```bash
   cd theme/static_src
   npm install
   cd ../..
   python manage.py tailwind start
   ```

9. Ejecutar servidor de desarrollo
   ```bash
   python manage.py runserver
   ```

10. Crear superusuario (opcional)
    ```bash
    python manage.py createsuperuser
    ```

La aplicaci√≥n estar√° disponible en http://127.0.0.1:8000/

## üîç Uso

### Analizador de Credibilidad

El analizador eval√∫a diferentes aspectos de un contenido siguiendo los principios del pensamiento cr√≠tico:

1. **T√≠tulo**: Verifica la longitud y estructura del t√≠tulo, evaluando su claridad y precisi√≥n.
2. **Autor**: Verifica la credibilidad de la fuente, aplicando criterios de autoridad y confiabilidad.
3. **Contenido**: Analiza el lenguaje empleado, buscando palabras sensacionalistas o emocionalmente cargadas que puedan indicar sesgo o manipulaci√≥n.
4. **Fuente**: Compara con una base de datos de fuentes de mayor y menor credibilidad, basada en el historial de verificaci√≥n de hechos.

Cada uno de estos aspectos recibe una puntuaci√≥n y retroalimentaci√≥n detallada, generando una evaluaci√≥n global de la credibilidad del contenido.

URL: `/analyzer/`

### Estad√≠sticas de Desinformaci√≥n

Visualiza datos sobre la desinformaci√≥n verificada a partir de los art√≠culos fact-check del portal Newtral, incluyendo:
* Distribuci√≥n por categor√≠as de verificaci√≥n
* Fuentes m√°s frecuentes de contenido verificado
* Tem√°ticas m√°s comunes de desinformaci√≥n

URL: `/statistics/`

## ü§ñ Scraping y Tests

### Ejecutar el scraper

```bash
# Con Docker:
docker-compose exec dev python manage.py scrape_newtral --limit 10

# Sin Docker:
python manage.py scrape_newtral --limit 10 
```

### Ejecutar los tests

```bash
# Con Docker - todos los tests:
docker-compose run --rm test

# Con Docker - tests espec√≠ficos:
docker-compose run --rm test pytest -v apps/scraper/tests/test_base_scraper.py
docker-compose run --rm test pytest -v apps/scraper/tests/test_user_agent_rotation.py
docker-compose run --rm test pytest -v apps/scraper/tests/test_newtral_scraper.py

# Sin Docker - todos los tests:
pytest -v apps/scraper/tests/

# Sin Docker - tests espec√≠ficos:
pytest -v apps/scraper/tests/test_base_scraper.py
pytest -v apps/scraper/tests/test_user_agent_rotation.py
pytest -v apps/scraper/tests/test_newtral_scraper.py
```

## üìö Estructura del proyecto

El proyecto sigue una arquitectura modular orientada a buenas pr√°cticas de desarrollo Django:

```
the-critical-lens/
‚îú‚îÄ‚îÄ apps/                        # Aplicaciones Django (estructura modular)
‚îÇ   ‚îú‚îÄ‚îÄ analyzer/                # App de an√°lisis de credibilidad
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services.py          # Servicio de an√°lisis de contenido
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templates/           # Plantillas HTML
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ views.py             # Vistas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/               # App de inicio y dashboard
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ templates/           # Plantillas HTML
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ views.py             # Vistas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ scraper/                 # App de scraping de fact-checks
‚îÇ       ‚îú‚îÄ‚îÄ management/          # Comandos personalizados
‚îÇ       ‚îú‚îÄ‚îÄ migrations/          # Migraciones de base de datos
‚îÇ       ‚îú‚îÄ‚îÄ models.py            # Modelos de datos
‚îÇ       ‚îú‚îÄ‚îÄ scrapers/            # Implementaciones de scrapers
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ base.py          # Scraper base
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ newtral.py       # Scraper para Newtral
‚îÇ       ‚îú‚îÄ‚îÄ services.py          # Servicio de scraping
‚îÇ       ‚îú‚îÄ‚îÄ utils/               # Utilidades (logging, user agents, etc.)
‚îÇ       ‚îú‚îÄ‚îÄ views.py             # Vistas (estad√≠sticas)
‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ core/                        # Configuraci√≥n principal de Django
‚îÇ   ‚îú‚îÄ‚îÄ settings.py              # Configuraci√≥n del proyecto
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                  # URLs del proyecto
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ docs/                        # Documentaci√≥n del proyecto
‚îÇ   ‚îî‚îÄ‚îÄ miniguia_pensamiento_critico.pdf  # Gu√≠a que fundamenta los criterios de an√°lisis
‚îú‚îÄ‚îÄ templates/                   # Plantillas globales
‚îÇ   ‚îî‚îÄ‚îÄ base.html                # Plantilla base
‚îú‚îÄ‚îÄ theme/                       # Configuraci√≥n de Tailwind CSS
‚îÇ   ‚îî‚îÄ‚îÄ static_src/              # Archivos fuente para Tailwind
‚îú‚îÄ‚îÄ static/                      # Archivos est√°ticos para producci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ img/                     # Im√°genes del proyecto
‚îú‚îÄ‚îÄ docker-compose.yml           # Configuraci√≥n de Docker Compose
‚îú‚îÄ‚îÄ Dockerfile                   # Configuraci√≥n de la imagen Docker
‚îú‚îÄ‚îÄ .env_example                 # Ejemplo de variables de entorno
‚îú‚îÄ‚îÄ .gitignore                   # Archivos ignorados por Git
‚îú‚îÄ‚îÄ manage.py                    # Script de administraci√≥n de Django
‚îú‚îÄ‚îÄ pytest.ini                   # Configuraci√≥n de Pytest
‚îî‚îÄ‚îÄ requirements.txt             # Dependencias del proyecto
```

Esta estructura sigue buenas pr√°cticas de desarrollo Django, con clara separaci√≥n de responsabilidades y organizaci√≥n modular.

## üìÑ Modelos de datos

### Diagrama de la base de datos

La siguiente imagen muestra la estructura relacional de la base de datos:

[Ver diagrama de la base de datos](https://dbdiagram.io/d/67e1377a75d75cc8443a3b7d)

Esta estructura permite gestionar eficientemente tanto las categor√≠as de verificaci√≥n como los art√≠culos extra√≠dos mediante el scraper.

### VerificationCategory

Almacena las categor√≠as de verificaci√≥n utilizadas para clasificar los fact-checks.

| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| name | CharField | Nombre de la categor√≠a (ej. "Falso", "Enga√±oso") |
| description | TextField | Descripci√≥n de la categor√≠a |
| color | CharField | C√≥digo de color para representaci√≥n visual |

### FactCheckArticle

Almacena art√≠culos de verificaci√≥n de hechos extra√≠dos del portal Newtral.

| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| title | CharField | T√≠tulo del art√≠culo |
| url | URLField | URL √∫nica del art√≠culo |
| publish_date | DateField | Fecha de publicaci√≥n |
| verification_category | ForeignKey | Categor√≠a de verificaci√≥n |
| claim | TextField | Afirmaci√≥n verificada |
| claim_source | CharField | Fuente de la afirmaci√≥n |
| content | TextField | Contenido del art√≠culo |
| tags | CharField | Etiquetas tem√°ticas |
| author | CharField | Autor del art√≠culo |
| scraped_at | DateTimeField | Fecha de extracci√≥n |
| is_processed | BooleanField | Estado de procesamiento |

## ‚è≠Ô∏è Pr√≥ximos Pasos

### Machine Learning para un An√°lisis Avanzado
- Implementaci√≥n de modelos de NLP (Procesamiento de Lenguaje Natural) para un an√°lisis m√°s preciso del contenido
- Uso de APIs como OpenAI, HuggingFace o Google Cloud NLP para enriquecer el an√°lisis
- Integraci√≥n con datasets de fact-checking para entrenar modelos propios de detecci√≥n de fake news
- Desarrollo de un sistema de puntuaci√≥n m√°s granular basado en t√©cnicas de machine learning

### Mejoras de Infraestructura
- Implementaci√≥n de CI/CD para pruebas autom√°ticas y despliegue
- Despliegue en plataformas como Render o Railway para acceso p√∫blico
- Ampliaci√≥n de los servicios Docker para incluir entornos de producci√≥n y staging

## üë• Contribuir

Si deseas contribuir a este proyecto, por favor:

1. Haz un fork del repositorio
2. Crea una rama para tu funcionalidad (`git checkout -b feature/nueva-funcionalidad`)
3. Haz commit de tus cambios (`git commit -am 'A√±ade nueva funcionalidad'`)
4. Sube la rama (`git push origin feature/nueva-funcionalidad`)
5. Abre un Pull Request

## üìú Licencia

Este proyecto est√° licenciado bajo la Licencia MIT